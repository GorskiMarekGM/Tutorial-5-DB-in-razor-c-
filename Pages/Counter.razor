@page "/counter"
@using Npgsql

<h1>Counter</h1>

<p>Current count: @currentCount</p>

<button class="btn btn-primary" @onclick="IncrementCount">Click me</button>

@code {
    private Int64 currentCount = 0;
    private string con;

    private void IncrementCount()
    {
        con = "Server=209.216.96.59;";
        con += "User Id=u107957;";
        con += "Password Id=u107957;";
        con += "Database=adv_prog;";
        NpgsqlConnection connLink = new NpgsqlConnection(con);
        connLink.Open();
        string sql ="SELECT COUNT(*) FROM task;";
        NpgsqlCommand command = new NpgsqlCommand(sql, connLink);
        currentCount = (Int64)command.ExecuteScalar();
        connLink.Close();
    }
}
